<template>
  <div class="chart-pane">
     <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
     <div id="provinceChart" :style="{width: '100%', height: '100%', display: editing ? 'none' : 'block'}" ></div>
  </div>
</template>

<script setup>
import { onMounted, onUnmounted, reactive, watch, toRefs, onBeforeMount, computed } from 'vue'
import * as echarts from 'echarts'
import { useAppStore } from '@/store/app'
import baseData from './BaseData.json'
import result from './data4Draw2.json'
import hdIcon from '@/assets/dashboard/hd.svg'
import sdIcon from '@/assets/dashboard/sd.svg'
import fdIcon from '@/assets/dashboard/fd.svg'
import gdIcon from '@/assets/dashboard/gd.svg'
import {getAllPlants, getAllLines} from '@/api/baseData.js'
import {storeToRefs} from 'pinia'
echarts.registerMap('山西', {'type':'FeatureCollection','features':[{'id':'140100','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@AFWN@BBJADaHWR@DTH\\BDB@NADCDQ@IBCJDJ@FE@WB@DC@O@BLBFPLVT@HAVAFCBOAgGO@Q@SHEHGVEXEFEDQDEBGTKJGBGNGJYLAD@XCP@HFFFPGBABDBBDABOBKFAHGFgHKHELC@KCCB]dA@SEIBGDU@gKKAS@KFOPCHMEgBKC_MO@GFIRENEFG@]GADDPEJMNGL@DEJBJAJKHCD@LDLEFIFMBOEIEGAWD[@WBaCOFCF@JCJEHIHIFGBMFCFCBS@SHABAHBJCBKDKJONALDRCDG@OBMDOAKHMBaIIQGE_BWMI@GHGBC@MGODK@SGaBQEKKG@GHETAL@RADGDQDIFVHRLPDJHBDAFIP@HFLIREBSHEDEHENKLCLAV@DEDCF@\\EHGFABGDCDGLCLAJBJFHNROLGLBFLLAJBDbHHDFFBVXJRJRDpBNBVBPDd\\PHRF^PVBJFPPfbDLEPBFNF`DLHJAJGNBJAHDFNHAHFHBNADBAF@BF@FAHBHBB@EJDFJLHBDBBFFBH@^CN@HD@DCDKDABDLDDF@^IHAFGIeFIJEN@LFDFVCdaP@PEJBHCXSH@JBFLPHJAPFHDTBLJHBF@DIHCTCjQF@NJF@HERED@JG\\FRCJELKHAFCDILGFGJCJFDFhFQNBJGHGFCCXBBJDH@JERAJFDDRDHFHRHVFHDL@LCLIDG@EF@LE^EHOJQPILKR@LZJ~NL@BDAFGFI@ULCFAF@HRPZNJPDCXALETCVHLBHGJCRAFAHIVQHMJINC^@ZORAFBHJJD^LJ@LCFEDSLKHUFANANKPDH@ZKJ@NPXFDB@fBBBBJITIDEAGBALAHCBEAEBCFCLABCAKKOJMJGDCJAXCH@PHRCNEP@DBNJNHLNFFFD@HCNC@GN@BDBF@hEHCJCRIHBHAHB@JBBT@LDBATAPGFBHHF@BAHAJ@XF^DlJZXBRFDBFNP`^NHPFVBPFTBTLPAPFTJLJFDTBXDNHLRF@NRJFDABC@OFIHCJ@FDNCNFHD@DFDDFHFFDDD@HDDJDFBFRFHZJFBDDLDTCFFRFDD@FETCDBDD@HFXFTD^B^ELCHIAEEAAEAGFQLOFMAIEKKKDIZU@KMUKIKGACCCSCKBUOE@OFGCEAKAQBECAKOCCI@ECKCCMC@GGEKCM@CGAKAEKEGAKBGCmWKMIAIACECOKGG@ECAIDE@CGIOOACDE@AI@GKCCACFG@G@MCECAKHG@GCCIFG@MDCHADAHGNAbJFABABKAQFMFCHIXQNGF@DGDC`QBCLDHBNADAJ@JCBABMPOHAJAL@BQG@ECGGIC[D]BICMKEENEDALQIAEKKAGAAWEEYAIFCFMNMFE@IGAKCEKIEAIMICeLMA_GKDCDKBG@aMS@EDEHOBMDEJEBC@CGE@IGAGHI@EACIEYKKIKOIGEIQQGG@CBCPKBE@GMCIMAAJO@SNQ@IHKFK@GG@MNWNEBM@SGGCEI@SEEGCEIKCODK@AADO[ACEAMCCKEGGEM@GR[@EMMMGSMMCCC@EHGDGHEBC@WDEFA@CIIQIAWCQKA]AOEAEAILIBA@G@GCECASCAA@GAIMC@A@IFIHCNCDA@KACKEYCQBIAOGAKDWAYFATCHB@CDADMLQFM@GCiLKBIDIZCEKIE[AYGEEAADOCEsLKHYDE@CEAAOBSGU@CAAEBa@QCEAAGAK@MCGAMBGICCOACDMPUDI@GMAACSCEWBGDCDCBG@SEIDCBGPAFDRcDICQBGSBICGCEGCSBEGI@'],'encodeOffsets':[[115027,38358]]},'properties':{'cp':[112.549248,37.857014],'name':'太原市','childNum':1}},{'id':'140200','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@@EKIDKCI@OEEMEOUEEBC@IBICC@MCACE@AAACAM@OKEBUE@IFIAEBGCEKeEIQQ[aCOAWDK@OBKBMEODAFALEAGIE@CGCEC@EAC@EAACBGCIDCAGEBAAGSAAEC@A@AMGG@ADCDI@GECGEBCEEBEAGDKDADKLCBEKKCAEISECERIAABCVIJAJBDBDCH@JGHDLABCLGDGCE@CEGBGBCEOGCAECAIFIDKACC@EAABEEQQBC@@CCAC@CDOE}LQQawCMHCDEFOAEBC@EBEAEIICE@AAC@EGIACEG@AEGCA@AEAC@EAQDMCIGEDMDEFGAGFICGE]AQCEBMBK@CCOIO@KAEBOKYMQGMCQBQNIFUDWGQGSCcBKTCP@LGPYLBHKBBBC@GGG@ABA@ABGBOnE^CJOB[GoUKkKKU@cHIDEZK\\AN@ZKZKEHDJBDfbP@NDRAJGFIDMJIHI\\UROJML[VIL@VDHDN@FCFKDM@GUFaB]DMDWJMPELGPQPEF_J]FMAQCSCOBcJQL]J}M]KKDKVGJEBQEETIJULoVcXSZCTBNHTGRmlUHKRIXIH[FY@CFAJBLBLCJOP]bOLOHOR@JVTANMN@JFHNNCHD@JHFBCHBBPPBFAJKLBBBB@BEFEFON]PYRaNEDKPGPO\\BFFHV@DBHNH@jlPF`A`RxNILc^KPGFMNGDMAEFKXSB]AGBMNihIBcDMNULgHYFUDMBMEIG[KIIKI_Q_UQEeIe@HcFaBI@_G_BkAWEI@O@YPG@ECEE@KHK@EEEDA@GDCFANCFAPUFICEKOAGIAQHKHAAASEOUCCASSOCM@KCSEGKBMGIIEOE}AOGKKAMHIWCu@aB[CA_CGICoLOHgNQECOEIGEMGkKGFCJCFIF]LAZFzCP_JIDINGT@HRhFXBZEbG`APJNX\\JPJdDPFLDPF\\HJFLJ^APGFEDE\\QFCDEJAPABEDADEHBB@HVH@DCDGBGFKCIFSDEDAJEF@DVHEDAHEFKBCJFJKPDHHBBBGDAJFFLHVBR@\\BJNANIL[VIRBPLPLFN@HB@PCF@HLARQRGZQFELERMTILKXINMBB`W`ALBJBTF~^^LfJbLHHLVTtLVJ\\HRFTFPBHHN@ZBJDHLF\\HPDFBxPXLxPbDvRhDZFfBN°^|LnDJBbNPDJCBCBIBGJKJCNIRWDEJQJ_DIDEFMLONMH@HATFV@fETA^BdHdBNHNnNZTLRLJfZp^VTVNjPHNBLDFJJRH|TZPHLFRRZbHP@P`_n_JI\\kJEPAVF`NpddTZX@HFFDFADB@F@BARHRDRBP@`CHIJ@zPTDZFVTHHHJBN@XITSPWLMNKRAHTVBFJLDJDRTf@VDPOtAJFLJLZP`HLBHAXDL@NFHMLKbiPMNQDOFKFGbQNSDK@CJGFI@COIFKH@FEDEFCBGXIT@HDJDH@\\ULGJKBCACKY@ADKEABCEIBECCBALCL@HAHBDCAEDKBEIKMI@ABIASCKGGDGBCGGICBOKICEFMAA@CFGHCRD@GDG@CPEFABABMEEOICG@CPSBMXiJY@EDEJEHAH@dHF@HCDBLGJ@HGPFFAF@DG@IH@BCDAJ@RFNHFHdJPJHBH@JELMDIPKHCTCL@JDPH`CVGJE@QCICO_i_UsqgQiIeMUCg@eJMAMOE[OSCiDKDWDKASYESA[CESEQBUDWAYE]QC[HABDF@LM@EBEHGACBEAGBEEEC[EUKJWB@FWDAFQ@QHUHKLILOBQMOGK@WMGOAC@AAMAKCWOKAQP@JBP@DY\\@HEJSJ[HMDSACAGYJMAGFa@CEEE]IOWSGEOGMAcBKCKK@MHKRERLH@TCDEPCdENE^CLEL@DDLADCJBHCJGAYAK@OJMDSZuD@JJFBV@JCNGJIDAH@H@RDPASGRDJJHFRBJDLRBGHDLI@CA@@ED@DDDC@CE@BCD@DG@CACGBCEMEUKEECGBGDEFCD@BA@AHED@BEHBDABIFKDB@BCD@DFHTBP@RJ\\DJDHHLAHEAIBGCEHAJDDBNDHAFCJBDANHJDPEZ@bHH@D@TBDDJEPBJUC@BMAIRY@AEC@CCCQCCCAEHGFGBUFEBGBADBBEH@CGBGJ@DBBMKUE}ABeCWDONWHG\\kLGN@LBRA`FNA\\ILKBGDCBMBEBA@CBCBGHKDMVBHCBB@FDBDHrTNGFIGOCK@C'],'encodeOffsets':[[117313,40508]]},'properties':{'cp':[113.295259,40.09031],'name':'大同市','childNum':1}},{'id':'140300','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@BWBIDK@KDMZUTQ@MIIKKi]KKQSI[AKGOCODONUNKVMJQCqQsCY@SZWRMJ]JINGLCV@xLV@LANCNIX]JELCPAPDLBLFFDDBD@DEDICMAEBCLENDHBNG@CCCME@GCAOGBALEHCLFDBFCJBT@bCpMT@PHXFLADCBCEGGE@CHEDE@EE@KFCBAIBICQIMKYFEFCL@DA|wDEDKCA@CFGHAXIFEAGGGDGAIHEDE@KIS@GFGCKCASAAAPKFGFAXDFCHANGPSFMPSFMNgPQPCNGJKFIF[N]DSABKFKFILGNAbDREHKBIAKLIXMNIDKBICIEKWO[G_SGICKAQ@QFCGiAIGEOAODOJsZoRUFS@WA[SKKw]EWE_MIDEZCHEDOBGDKBWBeCSCGEAEBIEEaAEEGEOAcDOFWVIDOBsIcBUAwFKLCJOP]AkFIVOR]RELMTCN@^AFGH_VIJcpIXIJaVCFEPALFZEHIFeRKHIFEJCPAJBLFZJ\\Ln@TKRGDOHS@KAMBKJCLCHAfCHGJSFM@EDCXOZ@LFFPHBDKZEDIF]FSAICYOIQAGOWSGoBKBGFIJKHGJEJIJQCaSMKAMCCY@KDGCK@C@APGAMDGBOPANABIDI@CBMBGAKCAD_RCDCHE@MHWRGJEDENBRALABEBYIM@GBGHCBGBCD@NEHDJHDH@LGDBDF@N@HEHBDDDHLJ@@BCFBDPPHJ@DCFBJFDH@LHFTBBJBJBLNnXHDLAHBLFBFBLDHN@LDHF@HNDDDDL@FDJPDBLFDRALBFBHDPEF@VPLATDDDBDLHLJNV@LYVCJLLFLBJENKPER@DDHFDHNJBVED@JDVBLA^@HDDFdLPHpVdHNHFFLZHH`PNDbPTdN^RpRNBJ@pUTCb@^JVJNDd@RDXA'],'encodeOffsets':[[116281,39446]]},'properties':{'cp':[113.583285,37.861188],'name':'阳泉市','childNum':1}},{'id':'140400','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@AKKMqJYHQEOKIKKSMQDOTC\\HPFR@BOK__[SYCOHKPKN@`GvCRKBMGaCKHGTCTBNGPSVYBM@KACIKEAC@QFE@QGCCEAGHCBCC@IDAHAHBHGH@BA@EC@CDACBC@I@A@CGK@QCC@KCAIAAE@CBANHHBL@DAJITCDABMBQFKNGp@XELERKLITQVMVExBJQLaNQHODQ@OCS@MAMLSDMIMKMAICAQACAGIFIB[HSBIAEKAAEEAE@AACG@EBGDE@ICGSMSGIACCAC@ECEDCB@NLDBPANCHK@EFKMDCCCAEF@@CEGCBCVQBC@AAACAoKOD@EAASDEA@AJKHE\\EBAJAAEFKB@BBNDH@FABCBANABCGG@ABABC@IFBDCD@D@AGG@EEA@AFA@CEOCGBSAAB@D@BC@CEA@EB@FC@IAI@EC@ANGDCDGDAFBDGBOI@@ADEH@HG@UJMBI@GEEBCJC@C@CCEUEMGMMAOTIrEHIGG[EJIJGJMAGAEOKMAUHgHKAIGAYFMPCAMFMFYBSB[KQWFSHILKNYCKIGQGMDILKBaOMAWFW@KBmZONKHQFUCU@OBKFKDGFKDiHSAICGGWgMK_CQBaHMLGHAHBRDHM\\MJGDWHO@QCKCcQYQQEODKD]fQNGBKAcGQBGRKGeKaOGKCIGAOFe`QDSD@MDMJIROPODQHIJENGHQA_QQAKBIHoKYCi@iDSFGFGL@LLVBHATCNEFGBS@SDWLQDI@MAOIMEK@WJMFyJUHMJUZOFuSMFGN]`GRAHUTUHKJQBcOWA»_SOeDEJBR@JCLKNEJHRHJNHdPVJfRZNHHBHBTCNGPG`BHHJBbAXG\\AXDZLNLfAVE@IA_]GCGAHEFwLIFBDERBLFJFDBD@BC@QIGHCFML@DJDBBBFABGBGFBVCNCHEDEBwBkDCOFITINMDSDMF]PQLWZKJMJQJASPSdO`AFEJOnKjKXOHYHQHGJm^ILO\\KbEDIFOBI@UHIFEHMJCKPUTA`EPKNWDI@CTFf@`RPDJAFOPIVOAAB@LJXAFGDAD@\\HPfPFHAJDN@HCHLJLTHVELELFHNHP@^MV@^FNRBDIJMJGJLTNHFHDP@JQP]`ELBNZDRAfB^FTLRGH@HPRJH@THLTLHLDR@^BVDLCJELeHEXMJAdAPELIFIPK`MPKNQFCJAJBFDLPFHJDJBP@\\GfAJCdWbATDLFXXLDNLHBPCNILENCRBRD^NLNFNGZQJ_@SFGNF\\CNIXORWNAJFLDTCbCRMHSFQ@OFIHCLBDXCD@NFFAHBPBLDHFFDH@RELBL@DEAICG@EDAFATBHCDEFWBCD@X@TENA^INAHFDHHFLNJNRF\\B@VHFLBJATINM\\QRAPCTBRENKVUJOAkNC\\DHCDEFMVODGDUJINER@TDPBPEJATYJGJEdCNMDOEUEICMVU@K@QAKKUAKHKZONU`G^FFBLL`VNPRNjPFVEjANDj@PCPKLC^BDJFFdCZDTGFGB@D@BFGVDH@\\BDD@HCHGHAFDBDBLB@DIJiHAHBTGJ@PDF^@HTCDK@KDCHADB@FBB\\PHJD@BEFEF@DBBLNNHALBLRDNLLJDJBPGNWZad]TUTIGGBCNI@ACUIKIUVCNDLKJITIhGVIPKJGLG\\]TGNANGJGLKJaTiX_JGbK'],'encodeOffsets':[[116269,37627]]},'properties':{'cp':[113.113556,36.191112],'name':'长治市','childNum':1}},{'id':'140500','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@G@CAIBEBQJK@GAKEISESE@M^BPJJAFQ@EBWR@HAFS@CFQHCDIBE\\ADGBE@CAGWC@CPDPABABC@ICIKIECEBI@CBCJCXCHUCCeK_FgCQ@ICAAAMQBSJQLE@SAQCGCC@UNMDIFCAIIKFKFGBG@IGCAXWBUFK@IE]]QGQBcCK@IDSCSDG@YGI@A@AFDFDFVhDLEDI@CAQQECkAWEMEcFKBCB@DFFBDGNEB[@SDcP_DmJUGKCAACBCBABCD@BJB@DUDUHMBWEQBODETNDJRDLATILOJABAFDN@BEF]JYDEFAFBPFLHHFfMLQH]DOLURS^CRAbQfGPEDKXETFLDD\\XEjHjKLM@IHC~K`BJXPJLBjJH\\DXF\\R``RLHNJ`EJQRERFN\\RTJLNCTGPGJQRINCPDJFDDJC\\DXFJNFjevW[jEfAfBdJRP@PGV]bE@GDCDEJEFMB[OGPE`EDKBCBARFJJEJAT@RFP@B@FJJFPE`SLAJ@dMP@dLXBVCVGZC`AXJPBbCfE\\B`Rb`hV`R^`NTPFFFXGXApKVTP¼`XBdPRALIVGVSBGHQ^_HMNEvTPEVYNIVGzINEXIL@NFPJNBJ@RCXKTCT@HAFEDMBSAGKU@KHKHETEjCj@ZDpLJGLARB`RRBHGFMJIRGPCPOJQNINC@TCRCf_PEHBDJHLbPfLLHHQRAdHLBHARM^eLCPCRFZRdRLDRDP@XGHCNIN[ESBMHGNKbGRA`DNLXhHHJDTBPA^EHCHEXIPAV@VDRELGPMnYLAR@EG@GDCHABCEG@E@APBJGHADAAEU@EAMCCE@EFCF@LFBOJM@IEUGIKUBMHQTaBIEMMG@EBAVEVKPQBEIGBKBCFCBI@iAAKAKDgA[DEFAFANOACDAFADEREBOGAQLSBQFKBECCKAEACSGIBKAAGCI@EMMKSOMOCO@KDGEOIOTS@ECG]@KJSEMCOAMGGBSGIACBKLMCGFCBYQU@ECCCGQEEKKEIAAGAQ@ECGMECmBCDIPMDaSAC@C^AZIDG@GQCELEHEA@IEGGCCK@IJIFIACAAIBYLMDUAEBAD@DCDQAQRCBI@CFC@GBOCGCSEKDY@CAFA@CAIBKAGCA@CFEAAGBC@BCAGJC@AECDA@AEEABADOFKG@FEDAAAADECCDADA@ABAACBAEAFEDCFHBBBACCF@@AACC@AECAEC@ADA@@GAABIEACDCCCAACHC@BEAQA@CBE@AEACDCAKBOC@C@OC@CFI@AAECCI@KEG@CDYLI@KEIBUFOPEBGHKCMF_LUCOESDC@MHI@AEIEHQACMICCBkAIBAD@BEFK@I@AGMICEBKBKHC@KCQGGCWACE@GFG@CGUGGGEAC_MIBQDQCCEa@UHABAJABGCQFM@]FGAAACKOIMMQAIE@GDEAEACIGGOEGMGOB'],'encodeOffsets':[[115465,36050]]},'properties':{'cp':[112.851274,35.497553],'name':'晋城市','childNum':1}},{'id':'140600','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@@GDE@OGAM@KEKOAOJQ\\UJKBMIM[AQ@UAKGEEBIHCAAGACGLOEIDILAFEBGDC@ASE@EFCBIJENALELDHEHADC@CUG@GAAFGBCFCBABOFIDCREF[FCHEBOI]EKGIE[COEKCOIcIOW[IMBOH_FaAYEWQg@GHSJMJC`IDOEyBY^KJEDEDIHElLNHHFFJDPRFhMPGpKJDDHB`\\DbAv@XDGJBNLLPH~BPFJFHJANHLTFLDN@PDTTDBVDFPBTBBLGRGJBBHLPDFEJOVEBMDEBCD@HCBFF@FGL@LFFFDH@ZOP@J@XFlB`A`HJ@bAdEGf@fJRF`V`RLJJJ\\LJHNFNAVCZEhGVKNMdCJAjgNMHA^BTALWFENBHCNMHELOd]JKwM_Q_BOEikG@GMCAS@EAAEAEDELUHOFGJIdOZQbQDEHEFEFE@AAAAALKBIAEQQDGEAIGC@DGMMEG@INMBMUS@IPQPGPK^aPODIAKAKBIDEZ@\\EJGJWLQVGnkHQGSAMDSTYdWpUVKJIFSUAEGEKBa@GAC_[WKKWAMEKIKGOSGeDI@G@OGcCGG@MBMEAG@iXICGO]MKGGSECKBWNKLK@SCoFWAQBeCYFK@OAYKiYMCKB¡XKHWHMHSNBJHTBHKDAFeZaBKCEIE@GCaAIAEEAEBIACOMEGIACC@ISGiKoS]GmCeKIEOQAKGOIKKWWOEO@MGMMIiCeGIUAQEKIKECQ@MLEHMPKDI@UGKAQGGAOFO@@CTKFGA_GKOKEAQMWKWI]CWLEAWOIKAIFMGYEGWGWBOAMDGF]CG@MXDNCJIDUAIDGHGPCNKJQBSFS@YCMEsOGWGKBQNQDSBOCaKQAKD_V_LE@CEEAQBEACI@GDKAIQEIAKDEDEJAFBDBBRFHDDDBLCFGDM@eCG@GBCF@HHR@NCD@HNL@DC@IAAB@HAJCHWLKCG@EBE@MGICIAEDADBDLR@HCTCDQFMFBNBFADUN@FFbMZIJQDYLSFaBYCOCMIM]GEGCOFOVENGJENUNIBGNRFNJBDADUJEJCNJNIHGDWFIDGJCHCJ@HHJAF_^ABHRDNAJELEBKDAF@NQRET@NC@C@C@CEEACBIDULMNQFM@MGEAGBCFKBCHEJEPGPMTAF@DDRJHHD^J\\BTFrAhBPFNRuvGF_P[VERCTEHIHD@LXAJMF@FJHFNILMLENBDBD\\TFHHDJBJFHLVhINALDRDLAZ@HFFBNCLCVBRDJLDDDFBLHBFJH\\RLNNVRR@BNJFPDRDFB\\HFHTFFLFLDRRFJJ\\JNLXFFHFVZJJLXPNFHDF@LDNFDFHBNj`HRP@DBBFADLJ@TABABFFBPHFHHRJ@HRP@HLFFJBFFHBDJFHD@DCD@DCBDFEBDJEJ@D@BH@HRAJJFFBFFLBJHNHH@NFBBDHBBVHLPPJENMJXTBJHNFHDLCDN@PDH@JCX@HBNHNJLHVFNF\\XZLLDJPCRKDGFCREXKZQ^GL@ZChINIH@jQTAhM'],'encodeOffsets':[[115328,41203]]},'properties':{'cp':[112.433387,39.331261],'name':'朔州市','childNum':1}},{'id':'140700','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@J@FHTAHDDFDHAJHTRAJDdCCQBEHODAJCTFH@DADCHCXADFDTBBHNJ@VCNODCPBDDHJNAHBNDL@HBBBDF@RAbBFDBV@THPABBDFF@ZCLGtKDFCPBBFFZH\\BJFFLYDCJAJKLDj@HENKRCNCB@DGASDEBBZCXBLPHJBRAZDLFBD@LCBMDGDEJ@J@BNDBJ@HBBTDDBDF@H@HABKJBJBFPF^BLBDRBXRJJJ@DEBCF@XADGFCHGH@FDDNDTNNHNN@FQ\\@HFNHHLFDDBNDF\\BCPBBL@PCLDFJHDFF@TFJHDTHN@FAXMNMH@@HELGL@JMR@TIPBBJNND@HAFOLAD@DHHRRFJJHLPLJZLJFBD@FGJBHJHF@DHD@FAFINCPAFGFCT@bNH@LADCLC`HNBfKJDJNFBLJDFBLJHF@NENMDEJEZBFFBXHBLBFLJBKRCBMFFFNLJDJ@pEJDHHFDH@@BL@LDLCZ@DDBNNLbTRDJIFIHILGJIHELApATHPXBHJRZPJDTBRCLAPILYACOGEE@KPYDWFCN@TEHIDGBeDGDKLINALBT@PGHCLQ@SKmI[EYAKBIDOFIJELGfQJEFGEYBKFODEbUJIJWdoJI`UHGBE@]DMNSFK^QPQJUlE^BPODILKxEVBdAtJPAJCXUPEdCPBHFFFbBFFAJBFHFHBbD\\BXCHCPAFCDGFYJC`NXFFx^LL\\TXBT@VEpQtYPIPCPBHFBJHjTARRP^DLAXIJEHIjIXCPGPMH]COEMG[[aCK@KPeIUY__aQ[kyokQi@YEiCKQUOEQ@[QSSSoE]BQEMOMQCkSWOKMCKB[GaGQGGGMAM@]_[YIIIas@]IOW@OCQMUEM@YGKML{BQGOIIEMEMAIHMNKPEX@DI@YGIUWGQNSZMHKGMQMEKCM]MCIJQHUHIL@FDDA@KIGAI\\oDYEOIIEAG@EDIBACAGJICKE@@HGJA@MACCEOICIACBCF@DCDKB@LBNANEHE@KCC@IFEHOCKEIKCMOQKICUDMP[CIIGEQJQDOOEQ@QC]OYScUUISBOJ[@[GKCKOaLIHW`SjIbKLIHMHMBSH[^KHIHOLUJgHSJIJKLMCUDJVJLDV@BMJADHHSJSVc^YbMXOHIAICKKCMKQKAGBMMAKCAE@EFAFC@GI[OAA@ECAGBCD@LCLSD@GE]OCI@SHGAGBIjCJA@AKACECGBGHGDC@AC@[CGHUAEC@A@EHSHYCcDEECI]AKDOLODi@MCiBUFOEiQMMO_UKKEA]E_HMVYPGLBLLVBL@R@LUVDNFJFVCPMNcDIFIHSZIBOFOASCQ@MFIJCVCHUPENCFGD[CMDBlIPUVMLQFSAODQB[RMNSJIBKAGE@U[AQEIMKMGECGGEMB]JMBSFW@C@ADEXCFGDSAEBCB@FDHBJCFK@KAQFG@ECGEKCOAGAEBMEC@WDACDKJGPER@TENGDQDaCSEKBIXMPQJWDME[HMTE`@RIHYEMKM]MQCQAMDKFMJODGAMKKCWWKESCaBcXIDeB[HO@IAICEGKOECIAIBEDMROL_NOLEJKJOFcBIBWNGFKfIFKDUC]AQ@KCKGKSSGG@QIGOG@QHSK]EeAQBYCAMFK^_RO@ICOEGMGKSHINIJIACMQQCKAU@]NO@MGEGFKFKGUKSKIDG@GCMBIEGeOGO@[BCHCBEIW@KBAPBJUPOBECIQO@_EeDSAGKGOCQJMJUNKJ[LODMBMCUD{CaHBGAECEYGG@CBDJJH@FCFQBMIOJWEQEWEgROJGDGAKESCcCSIUCMJQPQFSQSGCIBSL]^]TMNePo`QJKNgnIRE\\HLNBDHGJGFADI@@GIAEJGFI@CCAKAECCC@ABADBREBEHERE@EA@GMi]MMAMB[J[R[^MHCTBLANDNL@ANDJH@HDDADCB@`BLFBDDPLPpJDBBLDBZPPBZARDRH\\TPRFBPBRLBDCB[PM@GGC@EBKHG@EDANBVAJCBGDEHKJEHGFM@KTORzPJADACG@MFINGHAHDHFLAHCdWNEXCfODC@MBCJCLAJBBBDZHJFH\\@BBHPD@PGF@DBDFBHCLBJLLTB\\BRDb@DJFHRHTJPVJVHPHDLHFLAJGRIN@RFATPJNDJFTbFBBTHFFLLJNJTFHLJdDhJNDLNRFPEXAhBHDHRJDJEHAF@NEFCBUD@LBFNBN@BED@\\BBB@DHB@BDRDHD@BCBKB@D@DNDBL@DADGZB@FIN@DDFH@FIDKDAN@HDDHBBXFBDAPDPRLNNDHDDPBRBTGBAAOHIHE^CDCDMAQBGVGJGDAFDLH@FFFFDDNRHDJNLBFFHHFRHRLLL@DAFFDVJFDDH@JDHHDRXBJVPPPFNARBZJLXTVNrLR@HFBBFBFT'],'encodeOffsets':[[115027,38358]]},'properties':{'cp':[112.736465,37.696495],'name':'晋中市','childNum':1}},{'id':'140800','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@T]VQPK^CRGNKEeGGEKAKBIFEZC^IFE@ACMBEBAPIJKBSCKIQMCFS@CACEGBAXKFERgBGAUDG@EECUIQOUCKGCE@GBGVYVcHOAGKKBELA@CUAIBGNU@EAOBOAGQWGAGFMABBCJCFKDIFCFAD@FABCBI@EACCEAaHWCEDQRMFODkBCACEEGKIIDQLCBIASOEAgNECKKEEE@CDYCQEMMIMAUFE@EC@KCCKI[DKAICEE@ICCkAEBGAMIO@C@OScAGCAE@APMFGDG@MDGDG@EGE[OG@MBOCMOKIIQEBEA@E@MGWCCEAM@WMCGC[AKCGGE@CCCMGGGGAKFCD@FIDKBM@OCKAIEOMMAAGIKIAU@MEI@KBG@YRCBWDAAEGACECQEGBE@KGKKQEGBCAGDSDGBM@MDIFEJCBIBIASOKEMASGWMICOF[RMFE@KEEGSiECQCI@EBCDILGFKBQBWAIDSRGDG@ICMKKKMSMWIeCCGE«I_I]KcQsICI@CDW\\MLUJU@IAEGAEDS@_IY[o_gYKoASEYMYAMJONcZeJM@ICECAIIKOKisEEEAiBFAaG_UGMCODULi\\YP]NOBMAKC_cOMIEQAQDyVaJWDDUDMHSLSRSZO`M^ETDZFVNZLh@`EVIZevETHrdpN^BL@FCFKF@D@PBFHPBD@FEHADBJDLBFDDJBPJP^NTZXXZT\\JTH^H`H^Pfh¾Jf\\ðLdJPJR\\ZRVztHPràFLJH^LHLNHNFPF\\RzHTv¢\\~BDRLJ@HInABQDCDAHB^AFCDMHAJGLAJFR@NCP@NH@FD\\NDFHDBDF@FL@FD@F@DDHLDFHZPFTDVATINMFQVBVGDICGWKIO@QJInRrHTFJ@PIJMPGNA`AZGHBT@NENANBHAJAVKfGRK`YNCNBZX`JPJJPBLCDCVAXD^DLC`V`LJPDP[@YHWPQDK@SDOFGN@PFRBZAXBHFF@HNBPZ`N\\V`RXVN^BfQ\\_HMHYHERGJGHSBI@gNWbMbKNETYFKHILANBLFHNb^PHnJTAJEDSAUFEFCHI@QIBiLQ@KAECEAOACEDIJKHSACCCSGAAHEBCAGGEE@GFOFKGA[AAAGB[P[PQDGEIICIKDGpeLAJA\\FZLFJFHXHLAJGHDTFDHFDX@ZJLJB@@GBEVK\\JJAH@HCLpP\\@`EnMZUF@XJAXDTJLHHJNBP@RBVDRDJLLBLMZN@FLBHDJAFECO@EDAZBdFTBREZYVORSPGVCMZHbEP@AEIGQEKKEICU@IDEJIDEPAR@HEZCJBF@FAFEJ@HCJBDADA@@AC@ABAAI@AIAAABMSOCGACC@KLEBKCCDeIAICCBG@AIGCE@KDGSACGAKFI@GFIAICCG@CCBECCIBCACEAGMAACDIR@DAD@LJFBF@FMHAFE@IFGBGAYRAHKzG^@vHRAPFTTRVLP@R'],'encodeOffsets':[[114662,36282]]},'properties':{'cp':[111.003957,35.022778],'name':'运城市','childNum':1}},{'id':'140900','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@JGFGDSFQ\\U`OHEvuMQOEgAqBSE[A]IGCIGCQ@CBENSHOFOJQLADEBALBNHN@RENMVKJCDAFBDFD@D@D@@MFSRQ@MBELCFAFKBICMGQBA`]BEGI@GDIDGHIJCXEHCJGIMDMFIVIBCACMIQEHMJAVMFMHIFMPUPEHDHFN^NJPDZDbATEZKRCJINYEa@EVMBCAEAMNEREDCDS@GKQACBCFCJBJDNHF@FAH@LDXKDGBI@GBAJBD@@CMK@GDC@MGQ@GDEHAH@fDN@HCDEAKCCGCQECEBEFIFCLCJBRFBJCL@HDJFBRAFBDFF@`K`ULCRBbLPDTARCRMLAXHPHtNFZDT@TERALIDMHOHGJCVBJCDICMNWH@^DHENCPBXAXHFHHZENBJJLXPFBXK^DXJXLRNFBPLHLB`EHSL@DP@PEHBRHLBVHJ@LCNOFGNKR@FDJLFLBRJVfHjDNJHN@NFPXPLXJLHPBLPRJFfLnD^HpTjLTH@JDDJBFHPNBDAJBFFFJBbBHDF@FJLDbAfYBELCAGGSAITMNGXGLG¢WLANDjZZLPBL@ZEfDRAXBpETDL@LKXMLAFDHTLH^NHPJDjWH@FBAN@NHHdDPHH@J@fCTHHPJLFLBNLXXL`\\BD@HAbHRDBVBRFFAHILULC^L~N^IRKdIPATDRDNB^E`IFEROHOFKNOXINCEVE HN@LCDE@ECMCG@UJK\\UNKPIVQJ[JGNIJCHEBICQ@MOeaACCIFGLLY@YBML[FYYMKMISIMEOS@mJSEEMAMKMOG[SUQ_SomgAGBMEOaCUJsF]BM@wNOPKDKFILKNIRGVEPAj[DUGO[OGKAQ@QHS@USCWD]JMIYmEOIeGGQGc@MLSJQBMGCIAKF_@gGOOGUEoCiD]HQAUKEOKmBQHKEQEKMKMIIEcKIQAM@cEQEGWBQCc@MCUI]Ia@SDoVI@MAoQ]QcMSaOMC_OGGKYEEMGcGoUOGcKCEGC]@KBUAICC@UFIAEGGJEBcH]ASCWEGEC@ACDCFS@ECCQEEESDKCCCEAYIEGEQEAICCC@GCCECGECEEC@CGCMEMDECI@GDEJ@PADCBIEMQE@KQMGWCSAECKISIOEOBSKSAOEUAOEMG_]MOAEECAQYWkI]CWEI@GBABE@GGEAOHSBABKCS@AA@IGAGBGAQJIDGDgFE@CA@AHMD@DM@GECEEKMMGMICAO@MFQDOGG@WDIBCDIHINLPBLADKBEDADBFAFGDKBABBHCFSJIJAAAA@eCAWEMOI@YLG@OCMLMBEBGVKLCTEFKDI@]KICGIEAQBYP]@MDIJGNURGJEBQBIDGHKAUGSDKFWBCDIOYMQO@GBEDEVKJ@HEBEACK@}MYI@KLQJKROPIFGF]@KFEH@JCDK@KCKEGGUGQGEQCCCIEQBIFG@ICAADWEDGHIHMARgECEIEIDEHKHCJEDGBKLIFQD[EIHC@QFGFE@MIE@iRSDGDCJE@GAKISAGCOEIBOGEKIAG@WTGDIAOFO@cbUDCEKEM@IFEJJfEHGB]JE@CCCKBALCDC@CGCM@]DG@EAYPEVCFSFWRCLANARDZCRDDXBfLH@RGVDHDPJADBZADYJGFEPDLHNKXDPOLOBIFKLKDED@DBJHJ@FGHCH@DCDENBDTNFF@JEDAFAFDD@FKLKFaZKL}nKLBHBHJFTNNFND`PCVKZWlUZIB]NSAEEQaIMQOOGcKWCeOeIIIQG_U]UMGOCIBWJIJOPKBGAKKCI@KDA@YEUWTIJeX[\\GNEX@XCJBJEDIFKBD]AUDMNGB[LCJDRCFO@WGgCYGQ@UBEDGHa|CNBR@LAHCFcLGHCLAP@TIjKRCHQJ_BKKCMG_WOC_SE_WWMSEQIY@IBGFSXINEDUB_CSFGHADBJDJNL@D@H@LCFON\\bFLHHAJEHIJALBDFFLFPBLHJPJT@LP\\RPHJBH@HAFY\\CJBBFDLFPLHLBLALELCNB\\ALAHQ\\IZCDSJCBELDLbjXLdXVH^D\\@\\FRDJF^XNHnfLTDLBPCPBFBDXJHHLXDNHP@HEHIHEF@HVj\\`PhTTCLTLHNDL@DGJCHBLFRNRFNHFLDHFHLFD@DK@_@KAM@_LSNKPEJ@DDFZRBJGHEDG@WIEEAIAACAGAEBEDCFBHHZ@JGLCBI@WCUAKFAHBHRR^lDDbJPNJFLANEN@XDNFFBDAPGdCFBTBJDJB^ELGH@FBFD\\DbCXB^JNLFNDPBVAJ@JRX`ZpRF@H@JBFDJJ@FFR@FGPMLAF@FHPNXDN@VBHJT@FCJQTAF@FBDHFL@FAFCLUHCD@FBDHB\\ADMDO@IDIN@LRA^HlV^J^DT@rSV@F@FEJKDChDNCXMVEN@LPFBZDLER@^MNEPAZMHCRUNIbEXKVE\\@LID@H@RLNDLLLFB@FDJJB@DFRHNB\\MN@NATMBFJHHBFCNJF@VED@BDH@FEFCFADD'],'encodeOffsets':[[114617,40563]]},'properties':{'cp':[112.733538,38.41769],'name':'忻州市','childNum':1}},{'id':'141000','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@NG\\]\\Q\\INANB^NNj@HFBF@FQFGFAAQBCBAD@DDBFBLDDJ@HEFIJB@HJ@BCHEHICGMAGKF[JQhmLMRIp_fONM^S^]TKJAHDRTETORIRDNVTJdDTDLFHBHCPIhQXFRFXFPINJRADE@EIGCIDAH@ZHDFBFAHbG|DVCNDNAPC\\KLIVMNIRIPDLHBHJ@XCLMFOB_VSLODNIFGJEVGJ@PAJEFCLaP[JKn]HIRGZGPGLWLiPmFIBE^yFITOBRINILIXYRK^ONETCNCJMJSPEDlCxAFAFCDGDMAUHEHABAAEAAIC@CNKDEHGRJD@@AACECEIAKFQACJExKFEGHBHD`^JBF@BUKeKMCYBWH[BWAaGIAGH_HODMASAGGGYMeQUI[KUKGIGQFILMDK@IAQFIfCLUBoHWEWEESO_M]_QgUa__Q[AeFaDOAWI_BYDUHUDWAcKO@cNI@KB_TOFIEEIA@O@QES@IBIFEIBQDALAFCF_HO\\PNAFEFIDCHCF@^aHU@OQOcIeAeBiF\\uXifMEEICWD[CIECCIDOJMRQHIHODSKMSI[QEMFQRQFII_GMQK__[QWE[CIGAiIKWOAIL_D}JGN@LKGiFi[WIOFSLWFCHOReBaDQ@Q]eSSOEQBuG]@yHGLQBBZAHEH@JEFGBENE@EAKIC@CBQ@CH@BBDNBBHDFDBJADDAFDDH@DDBJEJ@HEJBLDHTBCH@LDFJH@BAHDDBJfJDCLDFALKD@BDDHTPANBBJB@BBJAB@BBDCBCBIAGDI@EFEBE@IAYDGFQ@OBCFIJCF@JDVFJLLRFJHBFO@aFYGNUDOHQTUPYZQFSAcEYACB@FDPEFIBGCKA@EYMNAKKKCICQAU@QAOIMGGIKCSBWOEMCYVmN_F[@oOKGDG@IB[IULAF@HA@KIYIW@ECCGSEGCIHKBWGEGEIYK[EIBKBofCHJLJDFJCHORO\\A\\BHBBB\\LHPEHEF@HFBHADGFBBTHDDBDGTILCJDFPBFBFDLBR@jKJA@RGJEDEFBVCTIFSBmIOGa]GMKEMAKBGJELSZMFaLaNMX@hAJGTIHQHGFGZGN[`OJUH]AUMQWU_M[Y_AOGME@GEWAYBQAOEM@EHCP@TCLORGX@ZO\\OCKIU_D_CKC]BWDUDCAKIOOI_IYWMAMD_ZQLeHULIBGBMAMBMFS@GAYH_BMBOHINOJI@SEqGmQIJ@RJPXLDHCJUHUAERMNSJUBSCOEGYCEGKCCE@C@@EEKE@ACGCCE[MECG@Cb@T@HCFQXAF@FBHHHDJ@PAJENGNOJEHCF@HANB^BT@DCDMDIAOEE@UDID@D@DDFDV@FCRDLDNAFCFMNADENAJDHHFJDDDD\\EHGDOFGDITAFLRBHGPCNAXIVKPENIJKT@DFPATSVCFI^GZ@TEhFVP^DJ@J@HKPAH@HDJbhFJFR@HCPBVADMTADBLHJDJEJKJIRAH@HDJLPDHATBPPPTb@LBJH\\@J@HCFYTGR@JDFFHdZJLDJBHAPBVCRB`ALCFSVAFBPFPJNBDCJCBOF_TcdKPcGJGH_NOJIHCHAH@HDHNHF@L@FCFELOFENCFBFBDJ@HERAJBHDH^`BLEHEBMAKIGMGEIAKDAD@D@DDFTNJJBHCJKLGFMDMBeBEBABCLDDLBVEJDJLRdH\\@H@FGFOBEBABAFDFNDHFHNB\\AHGFWLMB[@GBGDCBEH@DDFFD\\@LBFBNLDPHANCJGLOD@F@HDHFFBDAJEJBDANMDIJ@HDRFTAHAJID@T@NCTCJQDCDADD@FAF@DXJD@BAHKHAHBFGB@\\HRBBHNHR@PCRAPJDJ@FNRAN@`FPJJJHFDN@RCP@^DLDN@LGDGDOFSONEFEPiPONGPAJBHAVILA^BJD^HfPdFDVFD^FZHHLLL^EhOPBLDLHFH@BKT@PDFDBHAJCFE@OHK@AEGGAAA@A@EBA^DBDAJD@DBDBBBCF@JZ@@B@BFDBFHADB@JTAzFDGFE@ELEFG@CACKAEC@AACAGAODEACOGACCMASCCAQHAHEVMDGPGH@DFF@F@NGB@LJNDNHLAJAN@F@HED@NBJDHHF@BAAEHCBCEGBKCEBGFC@CFCNKLKFYFOBWHsRMR@LNRTJBbARDFC@IDGEICIBAZAHDLCP@DBLFFGLC@FHB@B@HCL@FLFB@BCHEFAfHBF@BIDABJLD@JCDBBFCFADDHVHHF^XhP'],'encodeOffsets':[[114089,37688]]},'properties':{'cp':[111.517973,36.08415],'name':'临汾市','childNum':1}},{'id':'141100','type':'Feature','geometry':{'type':'Polygon','coordinates':['@@AECAGAIKCEFIA@GAGAEBE@@ABECAMBGAGEGBEMGCIBMAIHIBKG_CMEAEFQCIeaOOIEUA]OQEOGc[OCUAMAoAQCQIWIAUEEGCaGACBIKKAEHKPKMQEGAIBIDKHKDCHCBAHEFG@[DEFC@CBUDKLKFMFGFCTGFAJQEK@GJOBEACIGOCQKUGJERCHCBC@QDODOHGB@HBJJRFbATHL@PCNHD@HAHGJ@XN`AHFJRbJNALGPBNCPAH@DCCQBKPMLILCDAAIBGBATGT@DADENEHAJEJGFGDI@IDEPEbDXA\\@XCHBJFPFNAJEFECK@KDCLGBIAIFI@CHKNMFICOBC^HH@FEFMJQHEP@`NLDhANFDGPOLET@LBhLV@HCJATFB@^cDALDD@FKLGhGHEBGLEPABAACCABAHAEOEE@GDO@WBCZKHIHMHALIHSFARCFCFEFWHUFGTGR@P@hHPBDABEBU@GUSOKAEAKP@D@@CXAF@@ECIDIJAR@DCBC@MCA[ASG@CXQbGBCAI@AXMBEEQ@AEAAAGEQ@qKUMWSIKAYBQEMOOUOAIQWGCCG@ICGECUIECBE@CKKQKQGGEEGAEMKCIMECCCIKK@EQKCBIHUHAHBRCNCD]DGFGJBPABSHQAOACCCGMMQKCOBOACWEAACGGCM@CBCLEJG@CE@CJM@EYACHCBK@CACMC@A@ALADC@CGCQ@AGA@CAA[AC@AFM@MAAE@KVCDAFE@MBEFGCIQICGAGBgFWEOMQCKIMCgIcGKSEMIKIEKGEASEASaIEMCOIBSQEM@QJIHKBGECKOGUGUIOSIQGEGCIa@QC[ASAKKAIDKAGCECAE@OHC@GOAA[@EGGICYAAIAKBIDAD@NCDePWDMFcXGDKBGEGCGBMHEJ@NDHCBIByOPQLSN@HEFGLIFGHCDABIAUBMFCH@LGFAD@HHN@\\ODAACQKOAEAOQ[SQGQCYBOAYOCAAKCAoIKOCOACKE_AA@CDCBGCG@CIBMK@CMBMAKDSgO]WGEUGCGBCDEAECAIDC@IKBAJC@AAEeGEBGFADA@KE@EDK@G@AGA@CAAIDEHKECAO@KDGCYBABDJFJCH@JEDQCaBIAQSKMQ@QNGtAXEPEZKLMLED@DEDAHDFALFHADGDBFABE@GGICMAC@GFE@M@IBKBMGMCKIA@MHE@E@CEG@OHCHUNGFE@ABBRDDBTDNBDPHBDCFBPBHBD@BFDLBBD@DEHKF@FEFCHyESB@ICAGBAEEC@A@AY@@IDEAACACAC@BIAC]CAB@F@BBBHBFH@BGL@PEFIDGBCACE@OLS@AEGKGKCOAgP]FKKGKYG]EECCUcEeO]GIC]AKBUJGBIAOBMHOPOjEFMFPETCPCHKHM@KC]CO@QDM@ECIGIIEO@_BMMQ@ECIOIQBODQ@MGAGQA[GA@EHGAGBGLABC@WI@CBE@ECCCBCDIRCBOBMDS@C@IJGBSBQEGCI@CJMNCBIAIFCBEAGEGCE@C@KPIHMDGBALDVHdDJJNDJBN@FENKTGNGJEFGB[JKJIPAJBFFDFD\\BLALAHC\\ULCR@NFDFBHADEFEBgDMHAFBHHHRFLB\\ALBJDNLT^VTFJPTRLhRFFHJDFCbBNDFHHpbZXPP~b^P^VRFNBRDLDFHFfAFBJDDF@H@JUXCJ@FBF`PJNDLBHCHIFYHODM@_DUFMLGNAVBRBNP^FbDJHFLDHBrBPDxFJDdBJBHDDDHTHNBF@HCPDdLTLNBHCZBDRJLHHLJJBHAHelGJ@HBZCTAFEHELAFBJDHDDPBR@HDJFHPAHYTQRKFQDkFKFiRKJEN@LHLRJNPRBLGJg^UJUFZ]VINA\\QfW\\GDADBHEFCHIHepKbMTKHMFMJ]DYH]RGDKHGLCJ@LBJRXDF@FCHKTEDSHGJEV@L@HDPJT@L@LCNKV@PBJflBJALSbCNAR@ZBTBNHPHJNLRDhELBNHDFDVAV@NLlAZBTHPNNNFTBEZBRFPJNTRZdbJHLDfDXFHDHHDHBFANFVHNTVJ^H^FJLHTHdANCHAJGVKJ@JBjVHDFF@FGVAJDfGP@P@BTLF@JAR@LBJJDH@JDJ@NAJCL@RBDRRDLAJQ@WHCDENBDAFY^AH@PLNDJL`DHZNJHDFBFAFEJCN@NDJFHLJJHLBLJNTPMDE@K@G@CMKCIAIBCHGTE`DVAFCJMTWHEJAZ@RJTFXN`XTF`PD`XNHLDL`ARIDGLQJi@SBODKHGdKDEBG@KAQDMb{HGFCVAR@ZHhDXHP@DECQDI\\KHANMVC^BCLAJEFCAIDI@WFWHM\\[fWJIXSFV@ZCB@LDJLLHBLAPOJIXIJAPDNH^V`VRHJJfJfPXDdLPHRPJNRbFFTB^MJAVYXkLYDU_OMCMESMIEAGAGLK~mLKbYLELK@ECCBEBEFC@IEESMACFMDC@CDGHG@EGIAI@CFCLCLKJEPAPKCOLWGMCKFOHEZIBCAYBCOIGCUCQHG@eKWACCDQCYBQBMDKXQTEDEFUZO'],'encodeOffsets':[[114502,39132]]},'properties':{'cp':[111.134335,37.524366],'name':'吕梁市','childNum':1}}],'UTF8Encoding':true})

const appStore = useAppStore()
const props = defineProps({
  editable: {
     require: true,
     default: false,
     type: Boolean
  }
})

let chart = null
const state = reactive({
  plants: [],
  lines:[],
  chart: null,
  editing: false,
  map: null,
  plantIcon: null,
  lineOptType: 'finish',
  plantOptType: 'finish',
  selectPlant: null,
  editPlants: [],
  editLines: [],
  addedPlants: [],
  addedLines: [],
  lineLabelMap: {},
  showRight: false,
  selectCell: null,
  rightPos: null,
})


onMounted(async () => {
  setOption()

  window.onresize = function() {
     //自适应大小
     chart.resize()
  }
})

onUnmounted(() => {
  if (chart) {
     chart.dispose()
  }
})

onBeforeMount(async () =>{
   await getPlantsDatas()
   await getLinesDatas()
   setOption()

   window.onresize = function() {
      //自适应大小
      chart.resize()
   }
})


const getPlantsDatas = async () =>{
   const {data} = await getAllPlants()
   state.plants = data
   for(let i = 0;i < state.plants.length; i++){
      let item = []
      item.push(state.plants[i].value1)
      item.push(state.plants[i].value2)
      item.push(state.plants[i].value3)
      state.plants[i].value = item
   }
}

const getLinesDatas = async () =>{
   const {data} = await getAllLines()
   state.lines = data
   for(let i = 0;i < state.lines.length; i++){
      const lines = state.lines[i]
      const coords = []
      
      for(let j = 0;j < lines.coords.length; j++){
         const coord = lines.coords[j]
         const item = []
         item.push(coord.value1)
         item.push(coord.value2)
         coords.push(item)
      }
      state.lines[i].coords = coords
   }
   console.log(state.lines)
}


const setOption = () => {
  chart = echarts.init(document.getElementById('provinceChart'))
  chart.hideLoading()

  let option = {
     with: '100%',
     height: '100%',
     title: {
        show: false
     },
     tooltip: {
        trigger: 'item',
        position: [10, 10]
     },
     geo: {
        show: true,
        map: '山西',
        roam: true,
        // center: [112.45476084659467, 37.80003871917222],
        zoom: 1.1,
        boundingCoords: [
           // 定位左上角经纬度
           [107.35678533141474, 41.08200696377695],
           // 定位右下角经纬度
           [116.22206068423716, 34.67259957893225]
        ],
        label: {
           show: true,
           color: 'rgba(255,255,255,0.3)',
           fontSize: 10,
           verticalAlign: 'top'
        },
        tooltip: {
           show: false
        },
        itemStyle: {
           areaColor: 'rgba(0,255,255,.02)',
           borderColor: '#00ffff',
           shadowColor: 'rgba(128, 217, 248, 1)',
           shadowOffsetX: -5,
           shadowOffsetY: 5,
           shadowBlur: 10
        },
        scaleLimit: {
           min: 1.2
        },
        emphasis: {
           disabled: true
        }
     },
     series: []
  }

  chart.setOption(option)


  state.plants = state.plants.map((bPlant) => {
     let plantRes = result['data4Draw']['plants'].find((rData) => rData.id == bPlant.id)

     if (plantRes) {
        return {
           ...bPlant,
           ...plantRes
        }
     } else {
        return bPlant
     }
  })

  state.lines = state.lines.map((bLine) => {
     let lineRes = result['data4Draw']['lines'].find((rData) => rData.id == bLine.id)

     if (lineRes) {
        return {
           ...bLine,
           ...lineRes
        }
     } else {
        return bLine
     }
  })

  setDataOption(chart, state.plants, state.lines)
}

const setDataOption = (chart, plants, lines) => {
  const hdSvg =
   'path://M947.008 960c12.48-18.368 18.528-40.96 16.064-64h43.072a32 32 0 0 0 28.096-47.36c-110.816-202.56-174.304-373.056-189.92-511.2a3348.16 3348.16 0 0 1-15.488-116.896A32 32 0 0 0 797.024 192h-33.6l-12.192-42.688a95.936 95.936 0 0 0-8.96-21.312h54.752a96 96 0 0 1 95.456 85.6c3.072 28.48 8.16 66.688 15.296 115.584 14.688 129.664 75.424 292.832 182.592 488.736A96 96 0 0 1 1006.144 960h-59.136z M669.728 0a96 96 0 0 1 95.2 83.616c3.904 30.048 10.56 72.544 20.064 128.64 25.088 191.008 91.136 416 198.304 674.752a96 96 0 0 1-88.672 132.736H125.92a96 96 0 0 1-89.664-130.304c118.24-309.12 184.992-535.104 200.288-676.48 5.856-54.144 10.72-96.992 14.56-128.608A96 96 0 0 1 346.4 0H669.76zM314.656 92.128c-3.84 31.264-8.64 73.824-14.496 127.712C284.16 368.064 216.096 598.4 96 912.32a32 32 0 0 0 29.92 43.424h768.704a32 32 0 0 0 29.568-44.256c-109.184-263.552-176.768-493.76-202.464-689.696-9.472-55.648-16.256-98.88-20.288-129.92A32 32 0 0 0 669.76 64H346.4a32 32 0 0 0-31.744 28.128z M479.808 457.024l77.888 41.408a32.064 32.064 0 0 1 23.808 25.344 31.872 31.872 0 0 1-7.04 27.84l-86.336 162.432a32 32 0 1 1-56.512-30.048l74.656-140.416-84.064-44.704a31.936 31.936 0 0 1-16.448-22.528 31.872 31.872 0 0 1 2.976-21.952l60.096-113.024a32 32 0 1 1 56.512 30.048l-45.536 85.6z'
  const sdSvg =
   'path://M547.2768 16.878933a51.080533 51.080533 0 0 0-70.5024-0.136533C349.627733 137.506133 102.929067 361.864533 102.929067 612.232533c0 225.928533 183.1424 409.070933 409.070933 409.070934s409.070933-183.1424 409.070933-409.070934c0-251.170133-243.541333-471.432533-373.794133-595.3536z m104.3456 559.0016L496.810667 792.610133c-9.642667 13.5168-30.958933 6.690133-30.958934-9.915733v-134.724267a17.066667 17.066667 0 0 0-17.066666-17.066666h-62.532267a17.066667 17.066667 0 0 1-13.892267-26.9824l154.811734-216.7296c9.642667-13.5168 30.958933-6.690133 30.958933 9.915733v134.7072a17.066667 17.066667 0 0 0 17.066667 17.066667h62.549333c13.8752 0.017067 21.947733 15.701333 13.8752 26.999466z'
  const fdSvg =
   'path://M642.096551 721.027523l173.798165 173.798165 96.293578-82.201835-39.926605-58.715596a425.100917 425.100917 0 0 0 89.247706-389.87156l-44.623853 11.74312c30.53211 117.431193 2.348624 241.908257-72.807339 335.853211l-30.532111-44.623854c56.366972-79.853211 77.504587-180.844037 54.018349-274.788991l-44.623853 11.74312c18.788991 77.504587 4.697248 157.357798-37.577982 223.119266l-110.385321-162.055046-32.880734 25.834862v-9.394495-4.697248c0-11.743119-2.348624-23.486239-7.045871-35.229358l28.183486 9.394496 103.339449-408.660551-119.779816-42.275229-21.137615 49.321101c-126.825688-23.486239-258.348624 9.394495-356.990825 91.59633l30.53211 35.229358c86.899083-70.458716 197.284404-100.990826 307.669724-82.201835l-23.486238 49.321101c-91.59633-11.743119-183.192661 16.440367-253.651376 75.155963l30.53211 35.229358c56.366972-46.972477 129.174312-70.458716 204.330275-65.761468l-91.59633 197.284404c-7.045872 4.697248-11.743119 7.045872-18.788991 11.743119l-2.348624-11.743119-406.311927 115.082569 21.137615 124.477064 46.972477-4.697248c16.440367 91.59633 63.412844 173.798165 131.522936 237.211009l32.880734-35.229357c-61.06422-54.018349-100.990826-126.825688-117.431193-206.678899l51.669725-4.697248c14.091743 65.761468 49.321101 126.825688 100.990826 173.798165l30.53211-35.229358c-42.275229-37.577982-72.807339-89.247706-84.550459-143.266055l173.798165-16.440367-42.275229 387.522936h-270.091743v46.972477h845.504587v-46.972477h-298.275229l-25.834863-256z m32.880734-659.963303l37.577982 14.091743-79.853211 317.06422-93.944954-35.229357 136.220183-295.926606z m173.798165 744.513762l-30.53211 25.834862-230.165137-232.513761 77.504587-63.412844 183.19266 270.091743z m-314.715596-389.87156c35.229358 0 63.412844 30.53211 63.412844 65.761468v4.697248c-2.348624 37.577982-32.880734 63.412844-70.458716 63.412844-21.137615 0-37.577982-11.743119-49.321101-25.834863l-9.394495-61.06422c7.045872-28.183486 35.229358-49.321101 65.761468-46.972477z m-425.100917 157.357798l-7.045872-39.926605 314.715596-89.247707 2.348624 16.440367c-2.348624 7.045872-2.348624 16.440367-2.348624 25.834863 0 18.788991 7.045872 37.577982 16.440367 54.018348v2.348624l-324.110091 30.53211z m375.779816 11.743119c11.743119 4.697248 23.486239 7.045872 35.229358 9.394496l-2.348624 2.348624 70.458716 70.458715 32.880734 307.669725h-180.844037l44.623853-389.87156z'
  const gdSvg =
   'path://M255.978667 789.354667a21.333333 21.333333 0 0 1-21.333334-21.333334v-512a21.333333 21.333333 0 0 1 21.333334-21.333333h512a21.333333 21.333333 0 0 1 21.333333 21.333333v512a21.333333 21.333333 0 0 1-21.333333 21.333334z m501.333333-32v-59.050667l-53.674667 59.050667z m-94.101333 0l86.805333-95.381334a14.933333 14.933333 0 0 1 7.296-4.416v-70.4l-159.722667 170.154667z m-106.538667 0l189.866667-202.218667a15.082667 15.082667 0 0 1 10.88-4.714667v-23.466666H700.8a14.933333 14.933333 0 0 1-3.669333 6.186666L477.525333 757.333333z m-120.981333 0l225.578666-230.4H579.626667a14.933333 14.933333 0 0 1-3.669334 6.186666L356.352 757.333333z m-169.088 0h48.021333l225.578667-230.4h-60.309334a15.061333 15.061333 0 0 1-3.925333 6.4l-198.933333 192a15.125333 15.125333 0 0 1-10.432 4.266666z m0-63.424l172.992-166.954667H364.373333a15.104 15.104 0 0 1-2.133333 2.517333l-95.594667 89.216z m0-116.096l54.506666-50.858667h-54.506666z m490.666666-80.725334v-230.4h-490.666666v230.4z M437.994667 421.76h-42.666667a10.666667 10.666667 0 0 1-10.666667-10.666667 10.666667 10.666667 0 0 1 10.666667-10.666666h16.896l-57.258667-57.216a10.794667 10.794667 0 0 1 0-15.125334 10.837333 10.837333 0 0 1 15.125334 0l57.216 57.28v-16.896a10.666667 10.666667 0 0 1 10.666666-10.666666 10.666667 10.666667 0 0 1 10.666667 10.666666V413.589333a10.666667 10.666667 0 0 1-8.341333 7.957334h-2.304z M544.64 421.76h-42.666667a10.666667 10.666667 0 0 1-10.666666-10.666667 10.666667 10.666667 0 0 1 10.666666-10.666666h16.896l-57.258666-57.216a10.794667 10.794667 0 0 1 0-15.125334 10.837333 10.837333 0 0 1 15.125333 0l57.216 57.28v-16.896a10.666667 10.666667 0 0 1 10.666667-10.666666 10.666667 10.666667 0 0 1 10.666666 10.666666V413.589333a10.666667 10.666667 0 0 1-8.341333 7.957334h-2.304z M662.762667 421.76h-42.666667a10.666667 10.666667 0 0 1-10.666667-10.666667 10.666667 10.666667 0 0 1 10.666667-10.666666h16.896l-57.258667-57.216a10.794667 10.794667 0 0 1 0-15.125334 10.837333 10.837333 0 0 1 15.125334 0l57.216 57.28v-16.896a10.666667 10.666667 0 0 1 10.666666-10.666666 10.666667 10.666667 0 0 1 10.666667 10.666666V413.589333a10.666667 10.666667 0 0 1-8.341333 7.957334h-2.304z'

  let hd = []
  let sd = []
  let fd = []
  let gf = []
  let wsLines = [
     {
        sLabel: '国晋北T1',
        eLabel: '',
        id: 'Line_493',
        name: '国晋北T1外送',
        coords: [
           [112.51435076138235, 39.84271365922907],
           [115.51435076138235, 39.84271365922907]
        ]
     },
     {
        sLabel: '国晋北T1',
        eLabel: '',
        id: 'Line_493',
        name: '国晋北T1外送',
        coords: [
           [112.51435076138235, 39.89271365922907],
           [115.51435076138235, 39.89271365922907]
        ]
     },
     {
        sLabel: '国晋中T1',
        eLabel: '',
        id: 'Line_493',
        name: '国晋中T1外送',
        coords: [
           [111.89662210340777, 37.22819893669982],
           [115.89662210340777, 38.22819893669982]
        ]
     },
     {
        sLabel: '国晋中T1',
        eLabel: '',
        id: 'Line_493',
        name: '国晋中T1外送',
        coords: [
           [111.89662210340777, 37.28819893669982],
           [115.89662210340777, 38.28819893669982]
        ]
     }
  ]

  let levelColorData = {
     1: '#5470c6',
     10: '#91cc75',
     35: '#fac858',
     110: '#ee6666',
     220: '#73c0de',
     330: '#3ba272',
     400: '#fc8452',
     525: '#9a60b4',
     750: '#ea7ccc',
     1050: '#ff2600'
  }

  plants.map(function(item) {
     if (item.gens) {
        let hdItems = item.gens.filter((gen) => gen.type == 'thermal')
        let sdItems = item.gens.filter((gen) => gen.type == 'hydro')
        let fdItems = item.gens.filter((gen) => gen.type == 'wind')
        let gfItems = item.gens.filter((gen) => gen.type == 'solar')

        if (hdItems.length > 0) {
           hd.push({
              label: hdItems.length,
              value: item.value
           })
        }

        if (sdItems.length > 0) {
           sd.push({
              label: sdItems.length,
              value: item.value
           })
        }

        if (fdItems.length > 0) {
           fd.push({
              label: fdItems.length,
              value: item.value
           })
        }

        if (gfItems.length > 0) {
           gf.push({
              label: gfItems.length,
              value: item.value
           })
        }
     }
  })

  chart.setOption({
     series: [
        {
           name: '火电',
           type: 'scatter', //'effectScatter',
           coordinateSystem: 'geo',
           zlevel: 20,
           silent: false,
           label: {
              show: false, // editable || showLabels,
              color: '#fff',
              fontSize: 10,
              position: 'left', // 显示位置
              formatter: ({ data }) => {
                 return data.label
                 // if (selectResult) {
                 //    if (data.StatType < 9) {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0) + '\n出力' + data.realGen
                 //    } else {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0)
                 //    }
                 // } else {
                 //    return data.label
                 // }
              } // 圆环显示文字
           },
           symbol: (value, params) => {
              return hdSvg
           },
           symbolOffset: [-8, -8],
           symbolSize: [12, 12],
           symbolKeepAspect: true,
           itemStyle: {
              color: ({ value, data }) => {
                 return 'red'
              },
              opacity: 1
           },
           data: hd
        },
        {
           name: '水电',
           type: 'scatter', //'effectScatter',
           coordinateSystem: 'geo',
           zlevel: 20,
           silent: false,
           label: {
              show: false, // editable || showLabels,
              color: '#fff',
              fontSize: 10,
              position: 'right', // 显示位置
              formatter: ({ data }) => {
                 return data.label
                 // if (selectResult) {
                 //    if (data.StatType < 9) {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0) + '\n出力' + data.realGen
                 //    } else {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0)
                 //    }
                 // } else {
                 //    return data.label
                 // }
              } // 圆环显示文字
           },
           symbol: (value, params) => {
              return sdSvg
           },
           symbolOffset: [-8, 8],
           symbolSize: [12, 12],
           itemStyle: {
              color: ({ value, data }) => {
                 return 'blue'
              },
              opacity: 1
           },
           data: sd
        },
        {
           name: '风电',
           type: 'scatter', //'effectScatter',
           coordinateSystem: 'geo',
           zlevel: 20,
           silent: false,
           label: {
              show: false, // editable || showLabels,
              color: '#fff',
              fontSize: 10,
              position: 'left', // 显示位置
              formatter: ({ data }) => {
                 return data.label
                 // if (selectResult) {
                 //    if (data.StatType < 9) {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0) + '\n出力' + data.realGen
                 //    } else {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0)
                 //    }
                 // } else {
                 //    return data.label
                 // }
              } // 圆环显示文字
           },
           symbol: (value, params) => {
              return fdSvg
           },
           symbolOffset: [8, -8],
           symbolSize: [12, 12],
           itemStyle: {
              color: ({ value, data }) => {
                 return '#ABEBC6'
              },
              opacity: 1
           },
           data: fd
        },
        {
           name: '光伏',
           type: 'scatter', //'effectScatter',
           coordinateSystem: 'geo',
           zlevel: 20,
           silent: false,
           label: {
              show: false, // editable || showLabels,
              color: '#fff',
              fontSize: 10,
              position: 'right', // 显示位置
              formatter: ({ data }) => {
                 return data.label
                 // if (selectResult) {
                 //    if (data.StatType < 9) {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0) + '\n出力' + data.realGen
                 //    } else {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0)
                 //    }
                 // } else {
                 //    return data.label
                 // }
              } // 圆环显示文字
           },
           symbol: (value, params) => {
              return gdSvg
           },
           symbolOffset: [8, 8],
           symbolSize: [12, 12],
           itemStyle: {
              color: ({ value, data }) => {
                 return 'yellow'
              },
              opacity: 1
           },
           data: gf
        },
        {
           name: '场站',
           type: 'scatter', //'effectScatter',
           coordinateSystem: 'geo',
           zlevel: 10,
           rippleEffect: {
              // 涟漪特效
              period: 4, // 动画时间，值越小速度越快
              brushType: 'stroke', // 波纹绘制方式 stroke, fill
              scale: 4 // 波纹圆环最大限制，值越大波纹越大
           },
           label: {
              show: !props.editable, // editable || showLabels,
              color: '#fff',
              fontSize: 10,
              position: 'bottom', // 显示位置
              formatter: ({ data }) => {
                 return data.label
                 // if (selectResult) {
                 //    if (data.StatType < 9) {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0) + '\n出力' + data.realGen
                 //    } else {
                 //       return data.label + '\n电压' + data.realKv + '\n负荷' + (data.realLoad).toFixed(0)
                 //    }
                 // } else {
                 //    return data.label
                 // }
              } // 圆环显示文字
           },
           tooltip: {
              show: true,
              trigger: 'item',
              backgroundColor: '#162631',
              formatter: ({ data }) => {
                 if(props.editable) {
                    return data.label
                 }

                 let hdStr = data.gens && data.gens.filter(gen => gen.type == 'thermal').length > 0 ? data.gens.filter(gen => gen.type == 'thermal').map(gen => '<div class="hd-title"><div class="name">' + gen.name + '</div><div class="label">' + gen.hours + '</div><div class="label">' + gen.capacity + '</div><div class="label">' + gen.quotation.toFixed(4) + '</div><div class="label">' + gen.energy + '</div></div>') : ''
                 let sdStr = data.gens && data.gens.filter(gen => gen.type == 'hydro').length > 0 ? data.gens.filter(gen => gen.type == 'hydro').map(gen => '<div class="hd-title"><div class="name">' + gen.name + '</div><div class="label">' + gen.hours + '</div><div class="label">' + gen.capacity + '</div><div class="label">' + (gen.curtailmentRate).toFixed(2) + '%' + '</div></div>') : ''
                 let fdStr = data.gens && data.gens.filter(gen => gen.type == 'wind').length > 0 ? data.gens.filter(gen => gen.type == 'wind').map(gen => '<div class="hd-title"><div class="name">' + gen.name + '</div><div class="label">' + gen.hours + '</div><div class="label">' + gen.capacity + '</div><div class="label">' + (gen.curtailmentRate).toFixed(2) + '%' + '</div></div>') : ''
                 let gfStr = data.gens && data.gens.filter(gen => gen.type == 'solar').length > 0 ? data.gens.filter(gen => gen.type == 'solar').map(gen => '<div class="hd-title"><div class="name">' + gen.name + '</div><div class="label">' + gen.hours + '</div><div class="label">' + gen.capacity + '</div><div class="label">' + (gen.curtailmentRate).toFixed(2) + '%' + '</div></div>') : ''

                 return (
                    '<div class="tooltip-pane">' +
             data.label +
             '  节点边际电价:' +
             data.lmp.toFixed(2) +
             '元/kWh' +
             (hdStr.length > 0
                ? '<br/><div class="type-title"><img width="15px" height="15px" src="' + hdIcon + '"><span style="color: red;margin-left: 4px">火电</span></div>' +
                 '<div class="hd-title"><div class="name">机组名称</div><div class="label">利用小时数</div><div class="label">装机容量（万kW）</div><div class="label">平均报价(元/kWh)</div><div class="label">中标电量(万kWh)</div></div>' +
                 (hdStr + '').replace(/,/g, '')
                : '') +
             (sdStr.length > 0
                ? '<br/><div class="type-title"><img width="15px" height="15px" src="' + sdIcon + '"><span style="color: blue;margin-left: 4px">水电</span></div>' +
                 '<div class="hd-title"><div class="name">机组名称</div><div class="label">利用小时数</div><div class="label">装机容量（万kW）</div><div class="label">弃资源率</div></div>' +
                 (sdStr + '').replace(/,/g, '')
                : '') +
             (fdStr.length > 0
                ? '<br/><div class="type-title"><img width="15px" height="15px" src="' + fdIcon + '"><span style="color: #ABEBC6;margin-left: 4px">风电</span></div>' +
                 '<div class="hd-title"><div class="name">机组名称</div><div class="label">利用小时数</div><div class="label">装机容量（万kW）</div><div class="label">弃资源率</div></div>' +
                 (fdStr + '').replace(/,/g, '')
                : '') +
             (gfStr.length > 0
                ? '<br/><div class="type-title"><img width="20px" height="20px" src="' + gdIcon + '"><span style="color: yellow;margin-left: 4px">光伏</span></div>' +
                 '<div class="hd-title"><div class="name">机组名称</div><div class="label">利用小时数</div><div class="label">装机容量（万kW）</div><div class="label">弃资源率</div></div>' +
                 (gfStr + '').replace(/,/g, '')
                : '') +
             '</div>'
                 )
              }
           },
           symbol: (value, params) => {
              return 'circle'
           },
           symbolSize: 15,
           itemStyle: {
              color: ({ data }) => {
                 return levelColorData[525]
              }
           },
           data: plants,
           emphasis: {
              scale: true
           }
        },
        {
           name: '线路1',
           type: 'lines',
           polyline: true,
           zlevel: 5,
           coordinateSystem: 'geo',
           effect: {
              show: true,
              period: 6, // 箭头指向速度，值越小速度越快
              constantSpeed: 20,
              trailLength: 0.02, // 特效尾迹长度[0,1]值越大，尾迹越长重
              symbol: 'arrow', // 箭头图标
              symbolSize: 5 // 图标大小
           },
           lineStyle: {
              color: ({ data }) => {
                 let rate = data.averageLoadRate
                 if (rate < 10) {
                    return '#fff'
                 } else if (rate < 50) {
                    return '#196F3D'
                 } else if (rate < 80) {
                    return 'yellow'
                 } else {
                    return 'red'
                 }
              },
              width: 2,
              opacity: 0.1,
              type: 'solid', // 尾迹线条透明度
              curveness: 0.3 // 尾迹线条曲直度
           },
           tooltip: {
              show: true,
              trigger: 'item',
              backgroundColor: '#162631',
              formatter: ({ data }) => {
                 if(props.editable) {
                    return data.label
                 }

                 return (
                    '<div class="tooltip-pane">' +
             data.name +
             '<div class="hd-title"><div class="name">平均负载率:</div><div class="label">' +
             data.averageLoadRate.toFixed(2) +
             '%</div></div>' +
             '<div class="hd-title"><div class="name">最大负载率:</div><div class="label">' +
             data.maxLoadRate.toFixed(2) +
             '%</div></div>' +
             '<div class="hd-title"><div class="name">传输容量(万kW):</div><div class="label">' +
             data.powerLimit.toFixed(2) +
             '%</div></div>' +
             '</div>'
                 )
              }
           },
           data: lines
        },
        {
           name: '线路1',
           type: 'lines',
           polyline: true,
           zlevel: 5,
           coordinateSystem: 'geo',
           effect: {
              show: true,
              period: 6, // 箭头指向速度，值越小速度越快
              constantSpeed: 20,
              trailLength: 0.02, // 特效尾迹长度[0,1]值越大，尾迹越长重
              symbol: 'arrow', // 箭头图标
              symbolSize: 5 // 图标大小
           },
           lineStyle: {
              color: 'red',
              width: 2,
              opacity: 0.1,
              type: 'solid', // 尾迹线条透明度
              curveness: 0.3 // 尾迹线条曲直度
           },
           tooltip: {
              show: true,
              trigger: 'item',
              backgroundColor: '#162631',
              formatter: ({ data }) => {
                 return (
                    '<div class="tooltip-pane">' +
             data.name +
             '<div class="hd-title"><div class="name">平均负载率:</div><div class="label">' +
             1 +
             '%</div></div>' +
             '<div class="hd-title"><div class="name">最大负载率:</div><div class="label">' +
             1 +
             '%</div></div>' +
             '<div class="hd-title"><div class="name">传输容量(万kW):</div><div class="label">' +
             1 +
             '%</div></div>' +
             '</div>'
                 )
              }
           },
           data: wsLines
        }
     ]
  })
}

const {
  editing,
  showRight,
  rightPos,
} = toRefs(state)
</script>

<style lang='scss' scoped>
.chart-pane {
 width: 100%;
 height: 100%;
 background-color: var(--panelBg);
 position: relative;
  .button-pane {
     position: absolute;
     right: 10px;
     top: 10px;
     display: flex;
     justify-content: flex-end;
     align-items: center;
     z-index: 10;

     .save {
        display: none;
     }

     .space {
        width: 4px;
     }

     .add-btn {
        line-height: 32px;
        position: relative;
        display: inline-block;
        font-weight: 400;
        white-space: nowrap;
        text-align: center;
        background-image: none;
        border: 1px solid transparent;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        touch-action: manipulation;
        height: 32px;
        padding: 0 15px;
        font-size: 14px;
        border-radius: 4px;
        color: #fff;
        background-color: #1890ff;
        border-color: #1890ff;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
     }

     .add-btn:hover,
     .add-btn:focus {
        color: #fff;
        background-color: #40a9ff;
        border-color: #40a9ff;
     }
  }


  .plant-list {
     position: absolute;
     left: 10px;
     top: 50px;
     width: 300px;
     border: 1px solid rgba(255, 255, 255, 0.12);
     bottom: 50px;
     z-index: 99;
     background-color: #181F4E;
     overflow: auto;
  }

  .plant-list::-webkit-scrollbar {
     width: 10px;
     height: 10px;
  }

  .plant-list::-webkit-scrollbar-track {
     background-color: #162631;
  }

  .plant-list::-webkit-scrollbar-thumb {
     background-color: #233946;
  }

  .plant-list::-webkit-scrollbar-thumb:hover {
     background-color: #79d2fe
  }

  .plant-list::-webkit-scrollbar-thumb:active {
     background-color: #79d2fe
  }

  .plant-list::-webkit-scrollbar-button {
     background-color: #162631;
     color: #233946;
  }

  .plan-item {
     background-color: #181F4E;
     border: 1px solid rgba(255, 255, 255, 0.5);
     margin: 4px;
     padding: 4px;
     color: #fff;
     cursor: pointer;
     display: flex;
     font-size: 12px;
  }

  .plan-item:hover,
  .plan-item.selected {
     background-color: #40a9ff;
  }

  .plan-item-name {
     width: 150px;
  }

  .plan-item-level {
     width: 100px;
  }

  .plan-item-added {
     width: 50px;
  }

  .right-pane {
     position: absolute;
     left: 0px;
     top: 0px;
     width: 120px;
     display: none;
     background-color: #091120;
     z-index: 99;
     color: #fff;
     border: 1px solid #79d2fe;
  }

  .right-pane .right-item {
     height: 30px;
     line-height: 30px;
     font-size: 12px;
     padding: 0px 8px;
     cursor: pointer;
  }

  .right-pane .right-item:hover {
     background-color: #121b34;
  }

 .chart {
   width: 100%;
   height: 100%;
 }
}
</style>
